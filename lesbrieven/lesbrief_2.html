<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Theme Made By www.w3schools.com - No Copyright -->
  <title>D3.js module</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/codeblock.css">
  <script src="../js/codeblock.js"></script>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">D3.js</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="../lesbrieven/lesbrief_1.html">Lesbrief 1</a></li>
        <li><a class="active" href="#">Lesbrief 2</a></li>
        <li><a href="../lesbrieven/lesbrief_3.html">Lesbrief 3</a></li>
        <li><a href="../lesbrieven/lesbrief_4.html">Lesbrief 4</a></li>
        <li><a href="../lesbrieven/lesbrief_5.html">Lesbrief 5</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- First Container -->
<div class="container-fluid bg-1 text-center">
  <h3 class="margin">Lesbrief 2</h3>
  <p>In deze lesbrief gaan we voor het eerst zelf SVG elementen aanmaken! Maar eerst nog een voorbeeld van een implementatie in D3.js, zoals we aan het begin van elke lesbrief doen. Zoals te verwachten is de grafiek hier onder van de grote held Mike Bostock met zijn <a href="https://bl.ocks.org/mbostock/4062045">Force Directed Graph</a>! </p>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="../js/force_directed.js"></script>
  <svg class="force_svg" width="960" height="600"></svg>
  <script>
    force_directed(".force_svg");
  </script>
</div>

<!-- Second Container -->
<div class="container-fluid bg-2 text-center">
  <h3 class="margin">Version Control</h3>
  <p>Op dit moment wordt er druk gewerkt aan D3! Dat betekent wel dat de laatste versie mogelijk wat instabiel is. Dit houdt in dat de code die je vandaag in versie vier schrijft, mogelijk over een jaar niet meer werkt omdat bepaalde functies anders genoemd zijn. Hierdoor gebruiken wij voorlopig nog even de stabiele versie 3, en gaan we aan het eind van de module in op versie 4 en de verschillen tussen de versies. Hou dus in je achterhoofd dat als je op internet gaat kijken naar voorbeelden dat sommige voorbeelden in versie 3 en sommige in versie 4 staan! (Zo is het voorbeeld hierboven in versie 4 geschreven.) Mocht je alvast benieuwd zijn naar de veranderingen tussen de versies kan je op de knop hier onder klikken.</p>
  <a href="https://github.com/d3/d3/blob/master/CHANGES.md" target="_blank" class="btn btn-default btn-lg">
    <span class="glyphicon glyphicon-search"></span> D3 veranderingen v3/v4
  </a>
</div>

<!-- Third Container (Grid) -->
<div class="container-fluid bg-3 text-center">
  <h3 class="margin">Zelf SVG's maken!</h3><br>
  <p>Zoals al eerder gezegd gaan we in deze lesbrief zelf SVG elementen maken m.b.v. D3.js. Maar eerst gaan we even kijken naar hoe we een SVG kunnen maken in gewoon HTML. Bij deze voorbeelden heb ik de SVG's een border gegeven, zodat je kunt zien hoe groot het element is.</p>

  <figure>
        <figcaption id="example1-caption">Voorbeeld SVG</figcaption>
  <pre
    aria-describedby="example1-description"
    aria-labelledby="example1-caption"><code
    contenteditable="true"
    tabindex="0"
    spellcheck="false">
    <b>&lt;!DOCTYPE html&gt;</b>
    <i>&lt;!-- Dit is een normale HTML file --&gt;</i>
    <b>&lt;html&gt;</b>
    <b>&lt;head&gt;</b>
      <b>&lt;title&gt;</b>SVG, voorbeeld<b>&lt;/title&gt;</b>
    <b>&lt;/head&gt;</b>
    <b>&lt;body&gt;</b>
      <i>&lt;!-- Een SVG element --&gt;</i>
      <b>&lt;svg&gt;</b>
        <i>&lt;!-- Met erin een rect van 100 bij 100 px --&gt;</i>
        <i>&lt;!-- rect staat voor rectangle, wat rechthoek betekent --&gt;</i>
        <b>&lt;rect width=</b><u>"100"</u> <b>height=</b><u>"100"</u> <b>&gt;&lt;/rect&gt;</b>
      <b>&lt;/svg&gt;</b>
    <b>&lt;/body&gt;</b>
    <b>&lt;/html&gt;</b>
    </code></pre>
      </figure>
  <p><small>Een rechthoek van 100x100 pixels!</small></p>
  <svg class="preview_svg" style="border: 1px solid black;">
    <rect width="100" height="100" ></rect>
  </svg>

  <p>We hebben nu een rect gemaakt! Er is alleen één groot probleem, als we de rect groter maken (probeer maar!). Als je de rect bijvoorbeeld 250 bij 250 pixel maakt, zie je helemaal geen vierkant maar een rechthoek. Dit komt omdat we de SVG zelf geen grootte hebben gegeven. Op het moment dat je dit vergeet geeft de browser zelf een hoogte aan je SVG waardoor het tekengebied voor je rect als het ware beperkt wordt. Als je de SVG zelf ook een height en een width mee geeft kan je zien dat we dan wel een mooi vierkantje krijgen!</p>

  <p><small>Zoals je ziet is dit geen mooi vierkantje, terwijl hij wel de afmeting 250x250 heeft!</small></p>

  <svg class="preview_svg" style="border: 1px solid black;">
    <rect width="250" height="250" ></rect>
  </svg>

   <figure>
        <figcaption id="example1-caption">Voorbeeld SVG2</figcaption>
  <pre
    aria-describedby="example1-description"
    aria-labelledby="example1-caption"><code
    contenteditable="true"
    tabindex="0"
    spellcheck="false">
    <b>&lt;!DOCTYPE html&gt;</b>
    <i>&lt;!-- Dit is een normale HTML file --&gt;</i>
    <b>&lt;html&gt;</b>
    <b>&lt;head&gt;</b>
      <b>&lt;title&gt;</b>SVG, voorbeeld<b>&lt;/title&gt;</b>
    <b>&lt;/head&gt;</b>
    <b>&lt;body&gt;</b>
      <i>&lt;!-- Een SVG element met hoogte/breedte 250px  --&gt;</i>
      <b>&lt;svg width=</b><u>"250"</u> <b>height=</b><u>"250"</u> <b>&gt;</b>
        <i>&lt;!-- Met erin een rect van 250 bij 250 px --&gt;</i>
        <i>&lt;!-- rect staat voor rectangle, wat rechthoek betekent --&gt;</i>
        <b>&lt;rect width=</b><u>"250"</u> <b>height=</b><u>"250"</u> <b>&gt;&lt;/rect&gt;</b>
      <b>&lt;/svg&gt;</b>
    <b>&lt;/body&gt;</b>
    <b>&lt;/html&gt;</b>
    </code></pre>
      </figure>

  <p><small>Nu we een grootte aan de SVG zelf hebben gegeven zie je dat de rect nu wel mooi vierkant is.</small></p>
  <svg class="preview_svg" width="250" height="250" style="border: 1px solid black;">
    <rect width="250" height="250" ></rect>
  </svg>

  <p>Nu we dit weten kunnen we zelfs wat coördinaten mee geven! Als we bijvoorbeeld een tekengebied willen van 250 bij 250 pixels, en een vierkantje (10x10px) willen in de linker bovenhoek gaat dat bijvoorbeeld zo.</p>

  <figure>
        <figcaption id="example1-caption">Voorbeeld SVG3</figcaption>
  <pre
    aria-describedby="example1-description"
    aria-labelledby="example1-caption"><code
    contenteditable="true"
    tabindex="0"
    spellcheck="false">
    <b>&lt;!DOCTYPE html&gt;</b>
    <b>&lt;html&gt;</b>
    <b>&lt;head&gt;</b>
      <b>&lt;title&gt;</b>SVG, voorbeeld coördinaten<b>&lt;/title&gt;</b>
    <b>&lt;/head&gt;</b>
    <b>&lt;body&gt;</b>
      <i>&lt;!-- Een SVG element met hoogte/breedte 250px  --&gt;</i>
      <b>&lt;svg width=</b><u>"250"</u> <b>height=</b><u>"250"</u> <b>&gt;</b>
        <i>&lt;!-- Met erin een rect van 250 bij 250 px --&gt;</i>
        <i>&lt;!-- rect staat voor rectangle, wat rechthoek betekent --&gt;</i>
        <b>&lt;rect x=</b><u>"10"</u> <b>y=</b><u>"10"</u> <b>width=</b><u>"10"</u> <b>height=</b><u>"10"</u> <b>&gt;&lt;/rect&gt;</b>
      <b>&lt;/svg&gt;</b>
    <b>&lt;/body&gt;</b>
    <b>&lt;/html&gt;</b>
    </code></pre>
      </figure>

  <p><small>Zoals je kunt zien hebben we het blokje nu 10 pixels naar beneden en 10 pixels naar rechts gezet! Anders zou hij op het zelfde plekje staan als het groene blokje. SVG's tellen hun coördinaten vanuit hun linker bovenhoek, net als bij het lezen van een boek. Dus als we een vierkantje willen tekenen, geef de coördinaten dan dus denkend vanuit de linker bovenhoek (dit wordt ook wel het [0,0] punt genoemd). Onthoud dit want dit wordt later erg belangrijk! </small></p>
  <svg class="preview_svg" width="250" height="250" style="border: 1px solid black;">
    <rect fill="green" width="10" height="10" ></rect>
    <rect x="10" y="10" width="10" height="10" ></rect>
  </svg>

  <p>Nu we blokjes kunnen maken, kunnen we deze vervolgens ook gaan kleuren. Zo kunnen we bijvoorbeeld een simpele versie van het windows logo na maken.</p>

    <figure>
        <figcaption id="example1-caption">Voorbeeld SVG4</figcaption>
  <pre
    aria-describedby="example1-description"
    aria-labelledby="example1-caption"><code
    contenteditable="true"
    tabindex="0"
    spellcheck="false">
    <b>&lt;!DOCTYPE html&gt;</b>
    <b>&lt;html&gt;</b>
    <b>&lt;head&gt;</b>
      <b>&lt;title&gt;</b>SVG, voorbeeld kleuren<b>&lt;/title&gt;</b>
    <b>&lt;/head&gt;</b>
    <b>&lt;body&gt;</b>
      <i>&lt;!-- Een SVG element met hoogte/breedte 250px  --&gt;</i>
      <b>&lt;svg width=</b><u>"250"</u> <b>height=</b><u>"250"</u> <b>&gt;</b>
        <i>&lt;!-- Met erin een rect van 250 bij 250 px --&gt;</i>
        <i>&lt;!-- rect staat voor rectangle, wat rechthoek betekent --&gt;</i>
        <b>&lt;rect x=</b><u>"0"</u> <b>y=</b><u>"0"</u> <b>width=</b><u>"100"</u> <b>height=</b><u>"100"</u> <b>fill=</b><u>"red"</u> <b>&gt;&lt;/rect&gt;</b>
        <b>&lt;rect x=</b><u>"120"</u> <b>y=</b><u>"0"</u> <b>width=</b><u>"100"</u> <b>height=</b><u>"100"</u> <b>fill=</b><u>"green"</u> <b>&gt;&lt;/rect&gt;</b>
        <b>&lt;rect x=</b><u>"0"</u> <b>y=</b><u>"120"</u> <b>width=</b><u>"100"</u> <b>height=</b><u>"100"</u> <b>fill=</b><u>"blue"</u> <b>&gt;&lt;/rect&gt;</b>
        <b>&lt;rect x=</b><u>"120"</u> <b>y=</b><u>"120"</u> <b>width=</b><u>"100"</u> <b>height=</b><u>"100"</u> <b>fill=</b><u>"yellow"</u> <b>&gt;&lt;/rect&gt;</b>
      <b>&lt;/svg&gt;</b>
    <b>&lt;/body&gt;</b>
    <b>&lt;/html&gt;</b>
    </code></pre>
      </figure>

  <p><small>Nu we blokjes kunnen kleuren en verplaatsen kunnen we al een soort logo maken.</small></s></p>
  <svg class="preview_svg" width="250" height="250"">
    <rect x="10" y="0" width="100" height="100" fill="red" ></rect>
    <rect x="130" y="0" width="100" height="100" fill="green" ></rect>
    <rect x="10" y="120" width="100" height="100" fill="blue" ></rect>
    <rect x="130" y="120" width="100" height="100" fill="yellow" ></rect>
  </svg>

  <p>Maar wat in HTML kan, kunnen we ook in D3! Als we het in het vervolg hebben over code gaat het voortaan over JavaScript. Je HTML zal er dus vervolgens zo uit zien:</p>

  <figure>
      <figcaption id="example1-caption">index.html</figcaption>
<pre
  aria-describedby="example1-description"
  aria-labelledby="example1-caption"><code
  contenteditable="true"
  tabindex="0"
  spellcheck="false">
<b>&lt;!DOCTYPE html&gt;</b>
<i>&lt;!-- Dit is de template voor de komende HTML opdrachten --&gt;</i>
<b>&lt;html&gt;</b>
<b>&lt;head&gt;</b>
  <b>&lt;title&gt;</b>D3 HTML voorbeelden<b>&lt;/title&gt;</b>
  <i>&lt;!-- D3 inladen --&gt;</i>
  <b>&lt;<strong>script</strong> src</b>=<u>"https://d3js.org/d3.v3.min.js"</u> <b>charset</b>=<u>"utf-8"</u>&gt;<strong>&lt;/script</strong>&gt;
  <i>&lt;!-- Inladen van mijn JavaScript code --&gt;</i>
  <b>&lt;<strong>script</strong> src</b>=<u>"js/mijn_code.js"</u> <b>charset</b>=<u>"utf-8"</u>&gt;<strong>&lt;/script</strong>&gt;
<b>&lt;/head&gt;</b>
<b>&lt;body&gt;</b>
  <i>&lt;!-- De div die we straks nodig hebben om voorbeeld aan te appenden. --&gt;</i>
  <b>&lt;div id=</b><u>"voorbeeld"</u><b>&gt;&lt;div&gt;</b>
<b>&lt;/body&gt;</b>
<b>&lt;/html&gt;</b>
</code></pre>
    </figure>

<p>Nu we een template HTML pagina hebben, kunnen we ons verdiepen in JavaScript D3.js. Zo gaan we nu eerst een blok maken op onze pagina. Zie dat we i.p.v. elke keer svgContainer aanroepen om een attribuut te veranderen, gewoon meteen alle attributen eraan kunnen plakken. Dit noemen we "method chaining". Hierbij kan je dus een keten maken met attributen die je wilt toekennen aan je selectie, zolang je de punt-komma (;) pas aan het einde van de keten zet. Om het verschil tussen wel of geen "method chaining" te gebruiken duidelijk te maken staat hier onder links een voorbeeld met, en rechts een voorbeeld zonder method chaining. Zoals je ziet maakt het nogal verschil in de hoeveelheid code en hoe vaak een variabele aangeroepen moet worden.</p>

<div class="row">
  <div class="col-md-6">
    <figure>
        <figcaption id="example1-caption">script.js</figcaption>
  <pre
    aria-describedby="example1-description"
    aria-labelledby="example1-caption"><code
    contenteditable="true"
    tabindex="0"
    spellcheck="false">
    <b>// Maak de SVG container</b>
    <strong>var</strong> svgContainer <b>=</b> d3.<b>select</b>(<u>"#voorbeeld"</u>).append(<u>"svg"</u>)
      .attr(<u>"width"</u>, 200</b>)
      .attr(<u>"height"</u>, 200</b>);
    <b>// Teken de rechthoek</b>
    <strong>var</strong> rectangle <b>=</b> svgContainer.append(<u>"rect"</u>)
      .attr(<u>"x"</u>, <b>150</b>)
      .attr(<u>"y"</u>, <b>50</b>)
      .attr(<u>"width"</u>, <b>50</b>)
      .attr(<u>"height"</u>, <b>140</b>);
  </code></pre>
      </figure>
  </div>
  <div class="col-md-6">
    <figure>
        <figcaption id="example1-caption">script.js</figcaption>
  <pre
    aria-describedby="example1-description"
    aria-labelledby="example1-caption"><code
    contenteditable="true"
    tabindex="0"
    spellcheck="false">
    <b>// Maak de SVG container</b>
    <strong>var</strong> svgContainer <b>=</b> d3.<b>select</b>(<u>"#voorbeeld"</u>);
    svgContainer.append(<u>"svg"</u>);
    svgContainer.attr(<u>"width"</u>, 200</b>);
    svgContainer.attr(<u>"height"</u>, 200</b>);
    <b>// Teken de rechthoek</b>
    <strong>var</strong> rectangle <b>=</b> svgContainer.append(<u>"rect"</u>);
    rectangle.attr(<u>"x"</u>, <b>150</b>);
    rectangle.attr(<u>"y"</u>, <b>50</b>);
    rectangle.attr(<u>"width"</u>, <b>50</b>);
    rectangle.attr(<u>"height"</u>, <b>140</b>);
  </code></pre>
      </figure>
  </div>
  </div>

  <p>Zoals je kunt zien zie de code aan de linkerkant er een stuk overzichtelijker uit. Het scheelt je aardig veel code om het met method chaining te doen! Hier onder zie je hoe de code van net er uit zal zien op de browser.</p>

  <div class="preview_svg" id="voorbeeld">

  <script type="text/javascript">
  function container_rect(container) {
  //make the svg container
  var svgContainer = d3.select(container).append("svg")
    .attr("width", 200)
    .attr("height", 200)
    .style("border", "1px solid black");
  //make the rectangle
  var rectangle = svgContainer.append("rect")
    .attr("x", 150)
    .attr("y", 50)
    .attr("width", 50)
    .attr("height", 140);
  }

  container_rect("#voorbeeld");
</script>

<p>Behalve de vierhoeken die je kan appenden kan je natuurlijk ook een circle appenden. Zo kan je bijvoorbeeld al gemakkelijk een gezichtje maken. Er zijn wel een paar dingen anders bij circles. Zo hebben circles cx en cy co&ouml;rdinaten i.p.v. de x en y co&ouml;rdinaten waar we met rects mee werken. Verder hebben we ook te maken met de radius, wat de doorsnede van een circle is vanaf het midden.</p>

<img src="../images/radius.png" class="img-responsive d3_pics" width="300px" alt="Image">

<div class="container">
  <figure>
      <figcaption id="example1-caption">script.js</figcaption>
<pre
  aria-describedby="example1-description"
  aria-labelledby="example1-caption"><code
  contenteditable="true"
  tabindex="0"
  spellcheck="false">
  <b>// Maak de SVG container</b>
  <strong>var</strong> svgContainer <b>=</b> d3.<b>select</b>(<u>"#voorbeeld"</u>).append(<u>"svg"</u>)
    .attr(<u>"width"</u>, 200</b>)
    .attr(<u>"height"</u>, 200</b>);

  <b>// Teken de rechthoek</b>
  <strong>var</strong> rectangle <b>=</b> svgContainer.append(<u>"rect"</u>)
    .attr(<u>"width"</u>, <b>200</b>)
    .attr(<u>"height"</u>, <b>200</b>)
    .style(<u>"fill"</u>, <b>yellow</b>);

  <b>// Teken de circle</b>
  <b>// Maak een lijst van je cx co&ouml;rdinaten</b>
  cx_circle = [<b>50</b>,<b>150</b>]
  <b>Gebruik een for-loop om door de co&ouml;rdinaten te loopen</b>
  <b>for</b> (i<b>=0</b>; i<b>&lt;2</b>; i<b>++</b>) {
    <strong>var</strong> circle <b>=</b> svgContainer.append(<u>"circle"</u>)
    <b>// Bij circles zijn er echter wel een paar dingen anders.</b>
    <b>// Zo heb je cx en xy i.p.v. x en y. c staande voor circle</b>
    .attr(<u>"cx"</u>, cx_circle[i])
    .attr(<u>"cy"</u>, <b>60</b>)
    <b>// En een r (radius) van de circle moet ook mee gegeven worden!</b>
    <b>// Dit is de doorsnede van de circle</b>
    .attr(<u>"r"</u>, <b>35</b>)
    .style(<u>"fill"</u>, <b>purple</b>);
  }
</code></pre>
    </figure>

<div class="preview_svg" id="voorbeeld_circle"></div>
</div>
<script type="text/javascript">
  //maak de SVG container 
var svgContainer = d3.select("#voorbeeld_circle").append("svg")
  .attr("width", 200)
  .attr("height", 200);

//maak de rechthoek
var rectangle = svgContainer.append("rect")
  .attr("width", 200)
  .attr("height", 200)
  .style("fill", "yellow");

//maak circle
cx_circle = [50,150];
for (i=0; i<2; i++) {
  var circle = svgContainer.append("circle")
  .attr("cx", cx_circle[i])
  .attr("cy", 60)
  .attr("r", 35)
  .style("fill", "purple");
}

</script>

<h1 class="margin">Opdrachten</h1>
<p>Opdracht 1:<br>
<small>Maak voor deze opdracht het windows logo na die we hiervoor met HTML hebben gemaakt, maar dan met D3!</strong></small></p>

<p>Opdracht 2:<br>
<small>Maak zelf een simpele minecraft creeper.</strong></small></p>

<p>Opdracht 3:<br>
<small>Maak de smiley hier onder na (de kleuren mag je zelf bepalen).</strong></small></p>

<div class="preview_svg" id="voorbeeld_smiley"></div>

<script type="text/javascript">
  //maak de SVG container 
var svgContainer = d3.select("#voorbeeld_smiley").append("svg")
  .attr("width", 200)
  .attr("height", 200);

//maak de rechthoek
var rectangle = svgContainer.append("circle")
  .attr("cx", 100)
  .attr("cy", 100)
  .attr("r", 100)
  .style("fill", "skyblue");

var rectangle = svgContainer.append("circle")
  .attr("cx", 100)
  .attr("cy", 100)
  .attr("r", 10)
  .style("fill", "grey");

var rectangle = svgContainer.append("rect")
  .attr("x", 50)
  .attr("y", 150)
  .attr("width", 100)
  .attr("height", 10)
  .style("fill", "grey");

//maak circle
cx_circle = [50,150];
for (i=0; i<2; i++) {
  var circle = svgContainer.append("circle")
  .attr("cx", cx_circle[i])
  .attr("cy", 60)
  .attr("r", 25)
  .style("fill", "grey");
}

</script>

</div>
<!-- Footer -->
<footer class="container-fluid bg-4 text-center">
  <p>Bootstrap Theme Made By <a href="https://www.w3schools.com">www.w3schools.com</a><br> Module Made By Bas Châtel</p> 
</footer>

</body>
</html>
